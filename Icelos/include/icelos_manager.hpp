#ifndef ICELOS_MANAGER_HPP
#define ICELOS_MANAGER_HPP

#include <icelos_type.hpp>

namespace icelos
{

template<class T>
class Manager
{
public:
  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Get an instance of the class.
  //! \return
  //!     Unique reference of the manager.
  ////////////////////////////////////////////////////////////////////////////
  static T& instance();

  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Destroy the unique instance.
  ////////////////////////////////////////////////////////////////////////////
  static void destroy();

  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Update the manager.
  //! \param dt
  //!     Elapsed time since the last update.
  ////////////////////////////////////////////////////////////////////////////
  virtual void update() = 0;

protected:
  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Protected default constructor.
  ////////////////////////////////////////////////////////////////////////////
  Manager();

  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Protected default destructor.
  ////////////////////////////////////////////////////////////////////////////
  virtual ~Manager();

  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Initialize the manager.
  //! \details
  //!     Override this method in order to initialize member attributes of
  //!     derived class.
  ////////////////////////////////////////////////////////////////////////////
  virtual void initialize();

  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Cleanup before destroying the class.
  //! \details
  //!     Override this method whether derived class member attributes
  //!     need to be deleted.
  ////////////////////////////////////////////////////////////////////////////
  virtual void cleanup();

private:
  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Unique instance of the class.
  ////////////////////////////////////////////////////////////////////////////
  static T* p_manager;

private:
  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Private copy constructor.
  ////////////////////////////////////////////////////////////////////////////
  Manager(const Manager&);

  ////////////////////////////////////////////////////////////////////////////
  //! \brief
  //!     Private assignment operator.
  ////////////////////////////////////////////////////////////////////////////
  Manager& operator=(const Manager&);
};

}

#include <icelos_manager.inl>

#endif /// ICELOS_MANAGER_HPP

